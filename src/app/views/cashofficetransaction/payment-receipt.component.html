<!-- Payment Receipt Component - Transactions Module -->

<div class="animated fadeIn">

  <!-- Receipt Details -->
  <div class="row">
    <div class="col-lg-12">
        <div class="card">
        <div class="card-header">
            <i class="fa fa-align-justify"></i>Receipt Details
        </div>
            
        <div class="card-body">
            <form [formGroup]="receiptDetails">
                <div class="form-row">

                    <!-- 1st Column -->
                    <div class="col-lg-6">
                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Receipt Number</label>
                            <div class="col-md-6">
                                <input type="text" formControlName="receiptNumber" class="form-control">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Cash Office</label>
                            <div class="col-md-6">
                                <input type="text" formControlName="cashOffice" class="form-control">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Received From <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" formControlName="receivedFrom" class="form-control">
                            </div>
                        </div>

                        <div class = "form-group row">
                            <label class="col-md-4 col-form-label" >Payment Method <span class="text-danger">*</span></label>
                            <div class = "col-md-6">
                                <select class="form-control" id="paymentMethod" formControlName = "paymentMethod">
                                      <option [ngValue]="paymn" *ngFor="let paymn of paymentMethods"> {{paymn}}</option>
                                  </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Receipt Amount <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="number" min="0" class="form-control" formControlName="receiptAmount">
                            </div>
                        </div>

                    </div>

                    <!-- 2nd Column -->
                    <div class="col-lg-6">

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label">Receipt Date <span class="text-danger">*</span></label>
                            <div class = "col-md-6">
                            <input class="form-control" id="receipt-date" type="date" 
                                formControlName = "receiptDate" name="receipt-date" value = "2018-09-01">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">PostedStatus / Batch No.</label>
                            <div class="col-md-6">
                                <input type="text" formControlName="postedStatus" class="form-control">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Cashier Name</label>
                            <div class="col-md-6">
                                <input type="text" formControlName="cashierName" class="form-control">
                            </div>
                        </div>

                    </div>
                </div>
            </form>
        </div>

        </div>
    </div>
  </div>

<!-- Payment Details -->
<div class="row">
    <div class="col-lg-12">
        <div class="card">
        <div class="card-header">
            <i class="fa fa-align-justify"></i>Payment Details
        </div>
            
        <div class="card-body">
            <form [formGroup]="paymentDetails">
                <div class="form-row">
    
                    <!-- 1st Column -->
                    <div class="col-lg-6">
                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Cheque / Ref. No. <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" formControlName="referenceNumber" class="form-control">
                            </div>
                        </div>

                        <div class = "form-group row">
                            <label class="col-md-4 col-form-label">Bank Name <span class="text-danger">*</span></label>
                            <div class = "col-md-6">
                                <select class="form-control" id="bankName" formControlName = "bankName">
                                        <option [ngValue]="bnkNm" *ngFor="let bnkNm of bankNames"> {{bnkNm}}</option>
                                    </select>
                            </div>
                        </div>
    
                        <div class="form-group row">
                            <label class="col-md-4 col-form-label" for="text-input">Drawee <span class="text-danger">*</span></label>
                            <div class="col-md-6">
                                <input type="text" formControlName="drawee" class="form-control">
                            </div>
                        </div>

                    </div>
    
                    <!-- 2nd Column -->
                    <div class="col-lg-6">

                        <div class="form-group row">
                            <label class="col-md-4 col-form-label">Reference Date <span class="text-danger">*</span></label>
                            <div class = "col-md-6">
                            <input class="form-control" id="reference-date" type="date" 
                                formControlName = "referenceDate" name="reference-date" value = "2018-09-01">
                            </div>
                        </div>

                        <div class = "form-group row">
                            <label class="col-md-4 col-form-label" >Branch Name <span class="text-danger">*</span></label>
                            <div class = "col-md-6">
                                <select class="form-control" id="branchName" formControlName = "branchName">
                                    <option [ngValue]="branchName" *ngFor="let branchName of branchNames"> {{branchName}}</option>
                                </select>
                            </div>
                        </div>
    
                    </div>
                </div>
            </form>
        </div>
    
    </div>
</div>
</div>

<!-- Receipt Applications -->
  <div class="row">
    <div class="col-lg-12">
        <div class="card">
        <div class="card-header">
            <i class="fa fa-align-justify"></i>Receipt Applications
        </div>
            
        <div class="card-body">
    
          <!-- Receipt Applications Tabs -->
          <div class= 'row'>

            <div class="col-lg-12"> 
              <tabset>

                <tab heading="TPOL">
                  <div class="card-body">
                    <form [formGroup]="myForm">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead class="thead-light">
                            <tr>
                              <th>Activity <span class="text-danger">*</span></th> <!-- Transaction Type -->
                              <th>Period <span class="text-danger">*</span></th>
                              <th>Policy Code <span class="text-danger">*</span></th>
                              <th>Status <span class="text-danger">*</span></th>
                              <th>Payer <span class="text-danger">*</span></th>
                              <th>Arrears <span class="text-danger">*</span></th>
                              <th>Expected Amount <span class="text-danger">*</span></th>
                              <th>Allocated Amount <span class="text-danger">*</span></th>
                            </tr>
                          </thead>
                                    
                          <tbody formArrayName="corrections">
                          
                            <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                              <td>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                  <label class="form-check-label" for="corSelect">
                                      <input formControlName="corTransType"></label>
                                </div>
                              </td>
                    
                              <td><input class="form-control" type="date" 
                                formControlName = "corPeriod" value = "2018-09-01"></td>
                              <td><input formControlName="corStatus"></td>
                              <td><input formControlName="corPayerName"></td>
                              <td><input formControlName="corPurpose"></td>
                              <td><input formControlName="corArrears"></td>
                              <td><input formControlName="corExpectedAmnt"></td>
                              <td><input formControlName="corAllocatedAmnt"></td>
                            </tr>
        
                            <tr>
                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                              </td>

                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                              </td>
                              <td colspan="3" class="text-center font-weight-bold">Amount</td>
                              <td class="text-right font-weight-bold">{{totalAmount | number : '.2-2' }}</td>
                            </tr>
                    
                          </tbody>
                        </table>
                        
                      </div>
          
                    </form>
                  </div>
                </tab>
    
                <tab heading="ACL">
                  <div class="card-body">
                    <form [formGroup]="myForm">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead class="thead-light">
                            <tr>
                              <th>Activity <span class="text-danger">*</span></th>
                              <th>Description</th>
                              <th>Period <span class="text-danger">*</span></th>
                              <th>Deal Number <span class="text-danger">*</span></th>
                              <th>Allocated Amount <span class="text-danger">*</span></th>
                            </tr>
                          </thead>
                              
                          <tbody formArrayName="corrections">
                        
                            <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                              <td>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                  <label class="form-check-label" for="corSelect">
                                    <input formControlName="corTransType"></label>
                                </div>
                              </td>
                              <td><input formControlName="corSundryDescription"></td>
                              <td><input class="form-control" type="date" 
                                formControlName = "corPeriod" value = "2018-09-01"></td>
                              <td><input formControlName="corDealNumber"></td>
                              <td class="text-right"><input formControlNmae="corAllocatedAmnt"></td>
                            </tr>

                            <tr>
                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                              </td>

                              <td>
                                <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                              </td>
                              <td class="text-center font-weight-bold">Secured Loan Total</td>
                              <td class="text-right font-weight-bold">{{totalAmount | number : '.2-2' }}</td>
                            </tr>
                  
                          </tbody>
                        </table>
                            
                      </div>
                                                  
                    </form>
                  </div>
                </tab>

                <tab heading="GPL">
                  <div class="card-body">
                    <form [formGroup]="myForm">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead class="thead-light">
                            <tr>
                              <th>Activity <span class="text-danger">*</span></th>
                              <th>Description</th>
                              <th>Period <span class="text-danger">*</span></th>
                              <th>Allocated Amount <span class="text-danger">*</span></th>
                            </tr>
                          </thead>
                              
                          <tbody formArrayName="corrections">
                        
                            <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                              <td>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                  <label class="form-check-label" for="corSelect">
                                    <input formControlName="corTransType"></label>
                                </div>
                              </td>
                              <td><input formControlName="corSundryDescription"></td>
                              <td><input class="form-control" type="date" 
                                formControlName = "corPeriod" value = "2018-09-01"></td>
                              <td class="text-right"><input formControlNmae="corAllocatedAmnt"></td>
                            </tr>

                            <tr>
                              <td>
                                <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                              </td>

                              <td>
                                <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                              </td>
                              <td class="text-center font-weight-bold">Group Total</td>
                              <td class="text-right font-weight-bold">{{totalAmount | number : '.2-2' }}</td>
                            </tr>
                  
                          </tbody>
                        </table>
                            
                      </div>
                                                  
                    </form>
                  </div>
                </tab>

                <tab heading="UPR">
                  <div class="card-body">
                    <form [formGroup]="myForm">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead class="thead-light">
                            <tr>
                              <th>Activity <span class="text-danger">*</span></th> <!-- Transaction Type -->
                              <th>Period <span class="text-danger">*</span></th>
                              <th>Policy Code <span class="text-danger">*</span></th>
                              <th>Status <span class="text-danger">*</span></th>
                              <th>Product Code <span class="text-danger">*</span></th>
                              <th>Payer</th>
                              <th>Units Encashed</th>
                              <th>Allocated Amount <span class="text-danger">*</span></th>
                            </tr>
                          </thead>
                                    
                          <tbody formArrayName="corrections">
                          
                            <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                              <td>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                  <label class="form-check-label" for="corSelect">
                                      <input formControlName="corTransType"></label>
                                </div>
                              </td>
                    
                              <td><input class="form-control" type="date" 
                                formControlName = "corPeriod" value = "2018-09-01"></td>
                              <td><input formControlName="corPolicyCode"></td>
                              <td><input formControlName="corStatus"></td>
                              <td><input formControlName="corProductCode"></td>
                              <td><input formControlName="corPayerName"</td>
                              <td><input formControlName="corUnitsEncashed"></td>
                              <td><input formControlName="corAllocatedAmnt"></td>
                            </tr>
        
                            <tr>
                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                              </td>

                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                              </td>
                              <td colspan="3" class="text-center font-weight-bold">Amount</td>
                              <td class="text-right font-weight-bold">{{totalAmount | number : '.2-2' }}</td>
                            </tr>
                    
                          </tbody>
                        </table>
                        
                      </div>
          
                    </form>
                  </div>
                </tab>

                <tab heading="TPP">
                  <div class="card-body">
                    <form [formGroup]="myForm">
                      <div class="table-responsive">
                        <table class="table table-bordered table-hover">
                          <thead class="thead-light">
                            <tr>
                              <th>Activity <span class="text-danger">*</span></th> <!-- Transaction Type -->
                              <th>Activity Desc</th>
                              <th>Paypoint <span class="text-danger">*</span></th>
                              <th>Period <span class="text-danger">*</span></th>
                              <th>Gross Amount <span class="text-danger">*</span></th>
                              <th>Receipted Amount <span class="text-danger">*</span></th>
                            </tr>
                          </thead>
                                    
                          <tbody formArrayName="corrections">
                          
                            <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                              <td>
                                <div class="form-check">
                                  <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                  <label class="form-check-label" for="corSelect">
                                      <input formControlName="corTransType"></label>
                                </div>
                              </td>

                              <td><input formControlName="corActivityDesc"></td>
                              <td><input formControlName="corPaypoint"></td>
                              <td><input class="form-control" type="date" 
                                formControlName = "corPeriod" value = "2018-09-01"></td>
                              <td><input formControlName="corGrossAmount"></td>
                              <td><input formControlName="corReceiptedAmount"></td>
                            </tr>
        
                            <tr>
                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                              </td>

                              <td colspan="2">
                                <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                              </td>
                              <td class="text-center font-weight-bold">Paypoint Total</td>
                              <td class="text-right font-weight-bold">{{totalAmount | number : '.2-2' }}</td>
                            </tr>
                    
                          </tbody>
                        </table>
                        
                      </div>
          
                    </form>
                  </div>
                </tab>

                <tab heading="SUN">
                  <div class="card-body">

                      <form [formGroup]="myForm">
                          <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                              <thead class="thead-light">
                                <tr>
                                  <th>Activity</th>
                                  <th>Description</th>
                                  <th>Period</th>
                                  <th>Allocated Amount</th>
                                </tr>
                              </thead>
                                  
                              <tbody formArrayName="corrections">
                    
                                <tr *ngFor="let correction of correctionForms.controls; let i=index" [formGroupName]="i">
                                  <td>
                                    <div class="form-check">
                                      <input class="form-check-input" type="checkbox" name="corSelect" formControlName="corSelect" value={{i}}>
                                      <label class="form-check-label" for="corSelect">
                                          <input formControlName="corTransType"></label>
                                    </div>
                                  </td>
                                  <td><input formControlName="corDescription"></td>
                                  <td><input class="form-control" type="date" 
                                    formControlName = "corPeriod" value = "2018-09-01"></td>
                                  <td><input formControlName="corAllocatedAmnt"></td>
                                  
                                </tr>

                                <tr>
                                  <td>
                                    <button type="submit" class="btn btn-md btn-primary" (click)="addCorrection()">ADD ACTIVITY</button> 
                                  </td>
    
                                  <td>
                                    <button type="submit" class="btn btn-md btn-primary" (click)="deleteCorrection()">DELETE ACTIVITY</button> 
                                  </td>
                                  <td class="text-center font-weight-bold">Amount</td>
                                  <td class="h6 text-right">{{totalAmount | number : '.2-2' }}</td>
                                </tr>
                        
                              </tbody>
                            </table>
                                
                          </div>
      
                        </form>
                    
                  </div>
                </tab>

              </tabset>
  
            </div>
  
          </div>
              
              <br>
    
              <!-- Controls -->
              <div class="row btn-toolbar text-center">
                <div class= "col-lg-12">
                                  
                  <div class="btn-group mr-2">
                    <button type="button" class="btn btn-md btn-primary" (click)="save()">SAVE</button>
                  </div>  
        
                  <div class="btn-group mr-2">
                    <button type="button" class="btn btn-md btn-primary" (click)="clear()">CLEAR</button>
                  </div>
    
                  <div class="btn-group mr-2">
                    <button type="button" class="btn btn-md btn-primary" (click)="exit()">EXIT</button>
                  </div>
                    
                </div>
              </div>
                
            </div>
            
          </div>
    
        </div>
            
</div>

<!-- Receipt Allocations -->
<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-header">
        <i class="fa fa-align-justify"></i>Receipt Allocation
      </div>
         
      <div class="card-body">

            <div class="col-lg-12">

              <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="thead-light">
                  <tr>
                    <th>Application Code</th>
                    <th>Application Description</th>
                    <th>Amount Allocated</th>
                  </tr>
                </thead>
                  
                <tbody>
                  <tr *ngFor="let allocation of receiptAllocations">
                    <td>{{allocation.code}}</td>
                    <td>{{allocation.description}}</td>
                    <td class="text-right">{{allocation.amount}}</td>
                  </tr>

                  <tr class = "font-weight-bold">
                    <td colspan = "2" class="text-center">Amount</td>
                    <td class="text-right">{{totalAmount | number : '.2-2' }}</td>
                  </tr>
                    
                </tbody>
  
              </table>
            </div>
                         
            </div>
      
      </div>
      
    </div>
  </div>
</div>

</div>